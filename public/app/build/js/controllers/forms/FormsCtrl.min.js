"use strict";angular.module("BfcApp").controller("FormsCtrl",["$scope","$rootScope","$stateParams","toaster","FormService","CompanyService","UserService","QuestionService","underscore","$state",function(o,e,s,n,r,c,i,a,t,p){function m(){r.ProgressBar(p.params.form_id).then(function(e){o.progress_bar=e})}c.Show(s.company_id).then(function(e){o.company=e.data}),c.GetCompaniesUsers(s.company_id).then(function(e){o.users=e}),o.company_id=s.company_id,r.Index(s.company_id).then(function(n){o.forms=n.data,"user"==e.CURRENT_USER.user_role||"bcp"==e.CURRENT_USER.user_role?p.go("forms.view_"+o.forms[0].position,{company_id:s.company_id,form_id:o.forms[0].id}):p.go("forms.view_1",{company_id:s.company_id,form_id:o.forms[0].id})}),o.dispatchToUsersPreview=function(e){i.DispatchPreview(e,s.company_id).then(function(e){e.success&&(o.dispatch_users=e.data)})},o.dispatchToUsers=function(o){i.Dispatch(o,s.company_id).then(function(o){o.success&&n.pop("success","Mail Notification sent successfully!","")})},o.$watchCollection(function(){return p.params},function(){"undefined"!=typeof p.params.form_id&&m()}),o.approveForm=function(){r.Approve(p.params.form_id).then(function(o){o.success&&(n.pop("success","Your answers have been saved!",""),p.reload())})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1zL0Zvcm1zQ3RybC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRyb290U2NvcGUiLCIkc3RhdGVQYXJhbXMiLCJ0b2FzdGVyIiwiRm9ybVNlcnZpY2UiLCJDb21wYW55U2VydmljZSIsIlVzZXJTZXJ2aWNlIiwiUXVlc3Rpb25TZXJ2aWNlIiwidW5kZXJzY29yZSIsIiRzdGF0ZSIsImRyYXdQcm9ncmVzc0JhciIsIlByb2dyZXNzQmFyIiwicGFyYW1zIiwiZm9ybV9pZCIsInRoZW4iLCJyZXMiLCJwcm9ncmVzc19iYXIiLCJTaG93IiwiY29tcGFueV9pZCIsImNvbXBhbnkiLCJkYXRhIiwiR2V0Q29tcGFuaWVzVXNlcnMiLCJyZXNwb25zZSIsInVzZXJzIiwiSW5kZXgiLCJmb3JtcyIsIkNVUlJFTlRfVVNFUiIsInVzZXJfcm9sZSIsImdvIiwicG9zaXRpb24iLCJpZCIsImRpc3BhdGNoVG9Vc2Vyc1ByZXZpZXciLCJyb2xlIiwiRGlzcGF0Y2hQcmV2aWV3Iiwic3VjY2VzcyIsImRpc3BhdGNoX3VzZXJzIiwiZGlzcGF0Y2hUb1VzZXJzIiwiRGlzcGF0Y2giLCJwb3AiLCIkd2F0Y2hDb2xsZWN0aW9uIiwiYXBwcm92ZUZvcm0iLCJBcHByb3ZlIiwicmVsb2FkIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUNBQSxTQUFRQyxPQUFPLFVBQVVDLFdBQVcsYUFBYyxTQUFTLGFBQWMsZUFBZ0IsVUFBVyxjQUFnQixpQkFBa0IsY0FBZSxrQkFBbUIsYUFBYyxTQUFVLFNBQVNDLEVBQVFDLEVBQVlDLEVBQWNDLEVBQVNDLEVBQWFDLEVBQWdCQyxFQUFhQyxFQUFpQkMsRUFBWUMsR0FnRHZULFFBQVNDLEtBQ0xOLEVBQVlPLFlBQVlGLEVBQU9HLE9BQU9DLFNBQVNDLEtBQUssU0FBVUMsR0FDMURmLEVBQU9nQixhQUFlRCxJQTdDOUJWLEVBQWVZLEtBQUtmLEVBQWFnQixZQUFZSixLQUFLLFNBQVVDLEdBQ3hEZixFQUFPbUIsUUFBVUosRUFBSUssT0FNekJmLEVBQWVnQixrQkFBa0JuQixFQUFhZ0IsWUFBWUosS0FBSyxTQUFVUSxHQUNyRXRCLEVBQU91QixNQUFRRCxJQU9uQnRCLEVBQU9rQixXQUFhaEIsRUFBYWdCLFdBQ2pDZCxFQUFZb0IsTUFBTXRCLEVBQWFnQixZQUFZSixLQUFLLFNBQVVRLEdBQ3REdEIsRUFBT3lCLE1BQVFILEVBQVNGLEtBQ2dCLFFBQXJDbkIsRUFBV3lCLGFBQWFDLFdBQTRELE9BQXJDMUIsRUFBV3lCLGFBQWFDLFVBRXRFbEIsRUFBT21CLEdBQUcsY0FBYzVCLEVBQU95QixNQUFNLEdBQUdJLFVBQVlYLFdBQWNoQixFQUFhZ0IsV0FBWUwsUUFBV2IsRUFBT3lCLE1BQU0sR0FBR0ssS0FHdEhyQixFQUFPbUIsR0FBRyxnQkFBa0JWLFdBQWNoQixFQUFhZ0IsV0FBWUwsUUFBV2IsRUFBT3lCLE1BQU0sR0FBR0ssT0FJdEc5QixFQUFPK0IsdUJBQXlCLFNBQVVDLEdBQ3RDMUIsRUFBWTJCLGdCQUFnQkQsRUFBTTlCLEVBQWFnQixZQUFZSixLQUFLLFNBQVVRLEdBQ25FQSxFQUFTWSxVQUNSbEMsRUFBT21DLGVBQWlCYixFQUFTRixTQUs3Q3BCLEVBQU9vQyxnQkFBa0IsU0FBVUosR0FDL0IxQixFQUFZK0IsU0FBU0wsRUFBTTlCLEVBQWFnQixZQUFZSixLQUFLLFNBQVVRLEdBQzVEQSxFQUFTWSxTQUNSL0IsRUFBUW1DLElBQUksVUFBVyx1Q0FBd0MsT0FXM0V0QyxFQUFPdUMsaUJBQWlCLFdBQ3BCLE1BQU85QixHQUFPRyxRQUNmLFdBQ29DLG1CQUF6QkgsR0FBT0csT0FBT0MsU0FDcEJILE1BT1JWLEVBQU93QyxZQUFjLFdBQ2pCcEMsRUFBWXFDLFFBQVFoQyxFQUFPRyxPQUFPQyxTQUFTQyxLQUFLLFNBQVVDLEdBQ25EQSxFQUFJbUIsVUFDSC9CLEVBQVFtQyxJQUFJLFVBQVcsZ0NBQWlDLElBQ3hEN0IsRUFBT2lDIiwiZmlsZSI6ImZvcm1zL0Zvcm1zQ3RybC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmFuZ3VsYXIubW9kdWxlKCdCZmNBcHAnKS5jb250cm9sbGVyKCdGb3Jtc0N0cmwnLCBbJyRzY29wZScsJyRyb290U2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ3RvYXN0ZXInLCAnRm9ybVNlcnZpY2UnLCAgJ0NvbXBhbnlTZXJ2aWNlJywgJ1VzZXJTZXJ2aWNlJywgJ1F1ZXN0aW9uU2VydmljZScsICd1bmRlcnNjb3JlJywgJyRzdGF0ZScsIGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSwgJHN0YXRlUGFyYW1zLCB0b2FzdGVyLCBGb3JtU2VydmljZSwgQ29tcGFueVNlcnZpY2UsIFVzZXJTZXJ2aWNlLCBRdWVzdGlvblNlcnZpY2UsIHVuZGVyc2NvcmUsICRzdGF0ZSkge1xuXG4gICAgLypcbiAgICBUb2RvIC0gR2V0IGNvbXBhbnkgIGluZm9cbiAgICAgKi9cbiAgICBDb21wYW55U2VydmljZS5TaG93KCRzdGF0ZVBhcmFtcy5jb21wYW55X2lkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgJHNjb3BlLmNvbXBhbnkgPSByZXMuZGF0YTtcbiAgICB9KTtcblxuICAgIC8qXG4gICAgIFRvZG8gLSBHZXQgY29tcGFueSB1c2Vyc1xuICAgICAqL1xuICAgIENvbXBhbnlTZXJ2aWNlLkdldENvbXBhbmllc1VzZXJzKCRzdGF0ZVBhcmFtcy5jb21wYW55X2lkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAkc2NvcGUudXNlcnMgPSByZXNwb25zZTtcbiAgICB9KTtcblxuXG4gICAgLypcbiAgICAgVG9kbyAtIEdldCBhbGwgZm9ybXNcbiAgICAgKi9cbiAgICAkc2NvcGUuY29tcGFueV9pZCA9ICRzdGF0ZVBhcmFtcy5jb21wYW55X2lkO1xuICAgIEZvcm1TZXJ2aWNlLkluZGV4KCRzdGF0ZVBhcmFtcy5jb21wYW55X2lkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAkc2NvcGUuZm9ybXMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICBpZigkcm9vdFNjb3BlLkNVUlJFTlRfVVNFUi51c2VyX3JvbGUgPT0gJ3VzZXInIHx8ICRyb290U2NvcGUuQ1VSUkVOVF9VU0VSLnVzZXJfcm9sZSA9PSAnYmNwJyl7XG4gICAgICAgICAgICAvLyByZWRpcmVjdCB1c2VyIHRvIG93biBmb3JtXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2Zvcm1zLnZpZXdfJyskc2NvcGUuZm9ybXNbMF0ucG9zaXRpb24sIHsgY29tcGFueV9pZCA6ICAkc3RhdGVQYXJhbXMuY29tcGFueV9pZCwgZm9ybV9pZCA6ICAkc2NvcGUuZm9ybXNbMF0uaWQgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIC8vIHJlZGlyZWN0IGFkbWluIHRvIGZvcm0gMVxuICAgICAgICAgICAgJHN0YXRlLmdvKCdmb3Jtcy52aWV3XzEnLCB7IGNvbXBhbnlfaWQgOiAgJHN0YXRlUGFyYW1zLmNvbXBhbnlfaWQsIGZvcm1faWQgOiAgJHNjb3BlLmZvcm1zWzBdLmlkICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLmRpc3BhdGNoVG9Vc2Vyc1ByZXZpZXcgPSBmdW5jdGlvbiAocm9sZSkge1xuICAgICAgICBVc2VyU2VydmljZS5EaXNwYXRjaFByZXZpZXcocm9sZSwgJHN0YXRlUGFyYW1zLmNvbXBhbnlfaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZihyZXNwb25zZS5zdWNjZXNzKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGlzcGF0Y2hfdXNlcnMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5kaXNwYXRjaFRvVXNlcnMgPSBmdW5jdGlvbiAocm9sZSkge1xuICAgICAgICBVc2VyU2VydmljZS5EaXNwYXRjaChyb2xlLCAkc3RhdGVQYXJhbXMuY29tcGFueV9pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlLnN1Y2Nlc3Mpe1xuICAgICAgICAgICAgICAgIHRvYXN0ZXIucG9wKCdzdWNjZXNzJywgXCJNYWlsIE5vdGlmaWNhdGlvbiBzZW50IHN1Y2Nlc3NmdWxseSFcIiwgXCJcIik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZHJhd1Byb2dyZXNzQmFyKCl7XG4gICAgICAgIEZvcm1TZXJ2aWNlLlByb2dyZXNzQmFyKCRzdGF0ZS5wYXJhbXMuZm9ybV9pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3NfYmFyID0gcmVzO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuICRzdGF0ZS5wYXJhbXM7XG4gICAgfSwgZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodHlwZW9mICRzdGF0ZS5wYXJhbXMuZm9ybV9pZCAhPSAndW5kZWZpbmVkJyl7XG4gICAgICAgICAgICBkcmF3UHJvZ3Jlc3NCYXIoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLypcbiAgICBUb2RvIC0gQXBwcm92ZSBmb3JtXG4gICAgICovXG4gICAgJHNjb3BlLmFwcHJvdmVGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBGb3JtU2VydmljZS5BcHByb3ZlKCRzdGF0ZS5wYXJhbXMuZm9ybV9pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZihyZXMuc3VjY2Vzcyl7XG4gICAgICAgICAgICAgICAgdG9hc3Rlci5wb3AoJ3N1Y2Nlc3MnLCBcIllvdXIgYW5zd2VycyBoYXZlIGJlZW4gc2F2ZWQhXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLypcbiAgICBFTkQgLSBBcHByb3ZlIGZvcm1cbiAgICAgKi9cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyAvKlxuICAgIC8vIFRvZG8gLSBsb2FkIGFsbCBmb3JtIHF1ZXN0aW9uc1xuICAgIC8vICAqL1xuICAgIC8vICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICByZXR1cm4gJHN0YXRlLnBhcmFtcy5mb3JtX2lkO1xuICAgIC8vIH0sIGZ1bmN0aW9uIChuZXdQYXJhbXMsIG9sZFBhcmFtcykge1xuICAgIC8vICAgICAkc2NvcGUuY3VycmVudF9xdWVzdGlvbnMgPSBbXTtcbiAgICAvLyAgICAgJHNjb3BlLnRtcF9xdWVzdGlvbnMgPSBbXTtcbiAgICAvL1xuICAgIC8vIH0pO1xuXG4gICAgLy8gJHJvb3RTY29wZS5jaGVja1Zpc2libGVRdWVzdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgIC8vICAgICByZXR1cm4gJHJvb3RTY29wZS5DVVJSRU5UX1VTRVIudXNlcl9yb2xlID09ICd1c2VyJyAmJiBpZCAhPSAkcm9vdFNjb3BlLkNVUlJFTlRfVVNFUi51c2VyX2lkO1xuICAgIC8vIH07XG5cbiAgICAvLyAkc2NvcGUuYXNzaWduX21vZGFsID0ge307XG4gICAgLy8gLypcbiAgICAvLyBUb2RvIC0gZ2V0IHVzZXIgcXVlc3Rpb25zXG4gICAgLy8gICovXG4gICAgLy8gJHNjb3BlLmdldFVzZXJRdWVzdGlvbnMgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAvLyAgICAgJHNjb3BlLnRlbXBfdXNlcl9pZCA9IGlkO1xuICAgIC8vXG4gICAgLy8gICAgIFVzZXJTZXJ2aWNlLkdldFVzZXJRdWVzdGlvbnNCeUZvcm0oaWQsICRzdGF0ZS5wYXJhbXMuZm9ybV9pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAvLyAgICAgICAgICRzY29wZS5jdXJyZW50X3F1ZXN0aW9ucyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgLy9cbiAgICAvLyAgICAgICAgIFF1ZXN0aW9uU2VydmljZS5HZXRCeUZvcm0oJHN0YXRlLnBhcmFtcy5mb3JtX2lkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIC8vICAgICAgICAgICAgICRzY29wZS50bXBfcXVlc3Rpb25zID0gcmVzcG9uc2UuZGF0YTtcbiAgICAvL1xuICAgIC8vICAgICAgICAgICAgIHZhciBjdXJyZW50X3FfaWRzID0gdW5kZXJzY29yZS5wbHVjaygkc2NvcGUuY3VycmVudF9xdWVzdGlvbnMsICdpZCcpO1xuICAgIC8vXG4gICAgLy8gICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGN1cnJlbnRfcV9pZHMsIGZ1bmN0aW9uICh2LCBrKSB7XG4gICAgLy8gICAgICAgICAgICAgICAgIHZhciBxdWVzdGlvbiA9IHVuZGVyc2NvcmUuZmluZCgkc2NvcGUudG1wX3F1ZXN0aW9ucywgZnVuY3Rpb24gKGkpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmlkID09IHY7XG4gICAgLy8gICAgICAgICAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgICAgICAgICAkc2NvcGUudG1wX3F1ZXN0aW9ucy5zcGxpY2UodW5kZXJzY29yZS5pbmRleE9mKCRzY29wZS50bXBfcXVlc3Rpb25zLCBxdWVzdGlvbiksIDEpO1xuICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgIC8vXG4gICAgLy8gICAgICAgICB9KTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfTtcblxuXG4gICAgLy8gLypcbiAgICAvLyAgVG9kbyAtIEFzc2lnbiB1c2VyXG4gICAgLy8gICovXG4gICAgLy8gJHNjb3BlLmFzc2lnblF1ZXN0aW9uID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgLy8gICAgIHZhciBxdWVzdGlvbiA9IHVuZGVyc2NvcmUuZmluZCgkc2NvcGUudG1wX3F1ZXN0aW9ucywgZnVuY3Rpb24gKGkpIHtcbiAgICAvLyAgICAgICAgIHJldHVybiBpLmlkID09IGlkO1xuICAgIC8vICAgICB9KTtcbiAgICAvLyAgICAgJHNjb3BlLmN1cnJlbnRfcXVlc3Rpb25zLnB1c2gocXVlc3Rpb24pO1xuICAgIC8vICAgICAkc2NvcGUudG1wX3F1ZXN0aW9ucy5zcGxpY2UodW5kZXJzY29yZS5pbmRleE9mKCRzY29wZS50bXBfcXVlc3Rpb25zLCBxdWVzdGlvbiksIDEpO1xuICAgIC8vIH07XG4gICAgLy9cbiAgICAvL1xuICAgIC8vICRzY29wZS5kZWFzc2lnblF1ZXN0aW9uID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgLy8gICAgIHZhciBxdWVzdGlvbiA9IHVuZGVyc2NvcmUuZmluZCgkc2NvcGUuY3VycmVudF9xdWVzdGlvbnMsIGZ1bmN0aW9uIChpKSB7XG4gICAgLy8gICAgICAgICByZXR1cm4gaS5pZCA9PSBpZDtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gICAgICRzY29wZS50bXBfcXVlc3Rpb25zLnB1c2gocXVlc3Rpb24pO1xuICAgIC8vICAgICAkc2NvcGUuY3VycmVudF9xdWVzdGlvbnMuc3BsaWNlKHVuZGVyc2NvcmUuaW5kZXhPZigkc2NvcGUuY3VycmVudF9xdWVzdGlvbnMsIHF1ZXN0aW9uKSwgMSk7XG4gICAgLy8gfTtcbiAgICAvL1xuICAgIC8vICRzY29wZS5hc3NpZ25BbGxRdWVzdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS50bXBfcXVlc3Rpb25zLCBmdW5jdGlvbiAodiwgaykge1xuICAgIC8vICAgICAgICAgJHNjb3BlLmN1cnJlbnRfcXVlc3Rpb25zLnB1c2godik7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vICAgICAkc2NvcGUudG1wX3F1ZXN0aW9ucyA9IFtdO1xuICAgIC8vIH07XG4gICAgLy9cbiAgICAvLyAvKlxuICAgIC8vIFRvZG8gLSBhc3NpZ24gdXNlcnMgdG8gZm9ybVxuICAgIC8vICAqL1xuICAgIC8vICRzY29wZS5hc3NpZ25Vc2Vyc1RvRm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL1xuICAgIC8vICAgICBpZighdW5kZXJzY29yZS5pc1VuZGVmaW5lZCgkc2NvcGUudGVtcF91c2VyX2lkKSl7XG4gICAgLy8gICAgICAgICBVc2VyU2VydmljZS5TdG9yZVF1ZXN0aW9ucygkc2NvcGUudGVtcF91c2VyX2lkLCAkc3RhdGUucGFyYW1zLmZvcm1faWQsICRzY29wZS5jdXJyZW50X3F1ZXN0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAvLyAgICAgICAgICAgICBpZihyZXNwb25zZS5zdWNjZXNzKXtcbiAgICAvLyAgICAgICAgICAgICAgICAgdG9hc3Rlci5wb3AoJ3N1Y2Nlc3MnLCBcIlN1Y2Nlc3MhXCIsIFwiXCIpO1xuICAgIC8vICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIH0pO1xuICAgIC8vICAgICB9XG4gICAgLy8gfTtcblxufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
