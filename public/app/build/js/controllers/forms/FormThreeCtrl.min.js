"use strict";angular.module("BfcApp").controller("FormThreeCtrl",["$scope","$state","$stateParams","toaster","FormService","$filter","$http","underscore","QuestionService","UserService","CommentService",function(e,t,n,s,a,o,i,u,r,d,c){function m(){d.Index(1,!0).then(function(t){var s=[];angular.forEach(t.data,function(e,t){s.push(e.name)}),a.Show(n.form_id).then(function(t){function n(e){var n=u.find(t.data.questions,function(t){return t.position==e});return"undefined"!=typeof n&&(n.check=!0),n}if(e.questions=[],e.save=function(t){r.Update(e.questions[t].id,JSON.stringify(e.questions[t].data)).then(function(e){console.log(e)})},e.questions[1]=n(1),e.questions[1]){u.isEmpty(e.questions[1].data)?e.questions[1].data=[["Bank name",t.data.name],["Completed by (name and title)",""],["Completed on (day/month/year)",""]]:e.questions[1].data=JSON.parse(e.questions[1].data);var a,o=document.getElementById("question_1");a=new Handsontable(o,{data:e.questions[1].data,columns:[{type:"text",readOnly:!0},{type:"text"}],cells:function(e,t){var n;return 1===e&&1===t?n={type:"dropdown",source:s}:2===e&&1===t?n={type:"date"}:void 0}})}if(e.questions[2]=n(2),e.questions[2]){u.isEmpty(e.questions[2].data)?e.questions[2].data=[["","Forecast for FinancialYear __/__/20__","Financial Period up to __/__/20__","Financial Year20__","Financial Year20__","Financial Year20__"],["L/Cs","","","",""],["Documentary collections","","","","",""],["Open account","","","","",""],["Guarantees","","","","",""],["Import loans","","","","",""],["Pre-payments","","","","",""],["Other","","","","",""],["Total Imports Supported","=SUM(B2:B8)","=SUM(C2:C8)","=SUM(D2:D8)","=SUM(E2:E8)","=SUM(F2:F8)"],["L/Cs","","","",""],["Documentary collections","","","","",""],["Open account","","","","",""],["Pre/post shipment finance","","","","",""],["Pre-payments","","","","",""],["Other","","","","",""],["Total Exports Supported","=SUM(B10:B15)","=SUM(C10:C15)","=SUM(D10:D15)","=SUM(E10:E15)","=SUM(F10:F15)"]]:e.questions[2].data=JSON.parse(e.questions[2].data);var i,d=document.getElementById("question_2");i=new Handsontable(d,{data:e.questions[2].data,formulas:!0})}if(e.questions[3]=n(3),e.questions[3]){u.isEmpty(e.questions[3].data)?e.questions[3].data=[["","Forecast for20__","Period up to__/__/20__","Year20__","Year20__","Year20__"],["Number of import LCs issued (#)","","","","",""],["Total value of import LCs issued (USD million)","","","","",""],["% of the value of import LCs issued that were confirmed by other banks","","","","",""]]:e.questions[3].data=JSON.parse(e.questions[3].data);var c,m=document.getElementById("question_3");c=new Handsontable(m,{data:e.questions[3].data})}if(e.questions[4]=n(4),e.questions[4]){u.isEmpty(e.questions[4].data)?e.questions[4].data=[["","Average","Maximum"],["Validity period (days)","",""],["Payment terms (days)","",""]]:e.questions[4].data=JSON.parse(e.questions[4].data);var p,l=document.getElementById("question_4");p=new Handsontable(l,{data:e.questions[4].data})}if(e.questions[5]=n(5),e.questions[5]){u.isEmpty(e.questions[5].data)?e.questions[5].data=[["#","Correspondent Bank Name","Current Credit Limit","(indicate currency)","Tenor in months","Utilization Rate (%)"],["1","","","","",""],["2","","","","",""],["3","","","","",""],["4","","","","",""],["5","","","","",""]]:e.questions[5].data=JSON.parse(e.questions[5].data);var q,f=document.getElementById("question_5");q=new Handsontable(f,{data:e.questions[5].data,columns:[{type:"text",readOnly:!0},{type:"text"},{type:"text"},{type:"dropdown",source:["USD","EUR","RUB","UHA"]},{type:"text"},{type:"text"}],cells:function(e,t){var n;if(0===e&&2===t)return n={type:"text"}}})}if(e.questions[6]=n(6),e.questions[6]){u.isEmpty(e.questions[6].data)?e.questions[6].data=[["#","Correspondent Bank Name","Current Credit Limit","(indicate currency)","Tenor in months","Utilization Rate (%)"],["1","","","","",""],["2","","","","",""],["3","","","","",""],["4","","","","",""],["5","","","","",""]]:e.questions[6].data=JSON.parse(e.questions[6].data);var _,y=document.getElementById("question_6");_=new Handsontable(y,{data:e.questions[6].data,columns:[{type:"text",readOnly:!0},{type:"text"},{type:"text"},{type:"dropdown",source:["USD","EUR","RUB","UHA"]},{type:"text"},{type:"text"}],cells:function(e,t){var n;if(0===e&&2===t)return n={type:"text"}}})}if(e.questions[7]=n(7),e.questions[7]){u.isEmpty(e.questions[7].data)?e.questions[7].data=[["","Year 20__","Year 20__"],["Interest income from Trade Finance","",""],["Fee/commission income from Trade Finance","",""]]:e.questions[7].data=JSON.parse(e.questions[7].data);var S,g=document.getElementById("question_7");S=new Handsontable(g,{data:e.questions[7].data})}if(e.questions[8]=n(8),e.questions[8]){u.isEmpty(e.questions[8].data)?e.questions[8].data=[["","Year 20__"],["Market share (%)",""],["Ranking (#)",""]]:e.questions[8].data=JSON.parse(e.questions[8].data);var h,E=document.getElementById("question_8");h=new Handsontable(E,{data:e.questions[8].data})}if(e.questions[9]=n(9),e.questions[9]){u.isEmpty(e.questions[9].data)?e.questions[9].data=[["IMPORTS SUPPORTED","","EXPORTS SUPPORTED",""],["Country","Main Goods Imported","Country","Main Goods Exported"],["","","",""],["","","",""]]:e.questions[9].data=JSON.parse(e.questions[9].data);var v,C=document.getElementById("question_9");v=new Handsontable(C,{data:e.questions[9].data,mergeCells:[{row:0,col:0,rowspan:1,colspan:2},{row:0,col:2,rowspan:1,colspan:2}],cells:function(e,t){var n;if(2===e&&0===t||3===e&&0===t||2===e&&2===t||3===e&&2===t)return n={type:"dropdown",source:["Ukraine","Germany"]}}})}if(e.questions[10]=n(10),e.questions[10]&&(u.isEmpty(e.questions[10].data)?e.questions[10].data={check:"",comment:""}:e.questions[10].data=JSON.parse(e.questions[10].data)),e.questions[11]=n(11),e.questions[11]&&(u.isEmpty(e.questions[11].data)?e.questions[11].data={check:"",comment:""}:e.questions[11].data=JSON.parse(e.questions[11].data)),e.questions[12]=n(12),e.questions[12]){u.isEmpty(e.questions[12].data)?e.questions[12].data=[["Name","Years of exp in trade finance","Certificates or training","","Name","Years of exp in trade finance","Certificates or training"],["","","","","","",""],["","","","","","",""]]:e.questions[12].data=JSON.parse(e.questions[12].data);var U,w=document.getElementById("question_12");U=new Handsontable(w,{data:e.questions[12].data,mergeCells:[{row:0,col:3,rowspan:3,colspan:1}]})}if(e.questions[13]=n(13),e.questions[13]){u.isEmpty(e.questions[13].data)?e.questions[13].data=[["Name","Years of exp in trade finance","Certificates or training","","Name","Years of exp in trade finance","Certificates or training"],["","","","","","",""],["","","","","","",""]]:e.questions[13].data=JSON.parse(e.questions[13].data);var O,x=document.getElementById("question_13");O=new Handsontable(x,{data:e.questions[13].data,mergeCells:[{row:0,col:3,rowspan:3,colspan:1}]})}})})}m(),e.users=[],e.storeAssign=function(){var t=[];angular.forEach(e.questions,function(e,n){e&&e.check&&t.push(e.id)}),d.StoreAssign({data:t,users:function(){var t=[];return angular.forEach(e.users,function(e,n){t.push({email:e.text})}),t}()},n.company_id,n.form_id).then(function(e){e.success?s.pop("success","Success!",""):angular.forEach(e.error,function(e){angular.forEach(e,function(e){s.pop("error","",e)})})})},e.assignToBcp=function(){var t=[];angular.forEach(e.questions,function(e,n){e.check&&t.push(e.id)}),d.StoreQuestionsToBcp(n.company_id,n.form_id,t).then(function(e){e.success&&s.pop("success","Success!","")})},e.selected_question={},e.getQuestionUsers=function(t){e.tmp_question_id=t,r.Users(t).then(function(t){e.selected_question.users=t.data})},e.unassignUser=function(t){r.Detach(e.tmp_question_id,t).then(function(t){t.success&&(s.pop("success","Success!",""),e.getQuestionUsers(e.tmp_question_id))})},e.visibleReplyForm=!1;var p=angular.element(document.querySelector("#global_add_comments_form"));e.showReplyForm=function(t,n){console.log(t,n),e.temp_comment_id=t,e.temp_comment_index=n;var s=angular.element(document.querySelector("#tmp_add_comments_form"+t));s.append(p),e.visibleReplyForm=!e.visibleReplyForm},e.comments=[],e.getAllComments=function(t){e.tmp_question_id=t,c.GetToQuestion(t).then(function(t){e.comments=t})},e.new_comment="",e.comment_tmp_reply="",e.storeComment=function(t,n){var a={comment:e.new_comment,question_id:e.tmp_question_id};"undefined"!=typeof t&&(a.comment=e.comment_tmp_reply,a.reply=1,a.reply_to=t),c.Store(a).then(function(t){t.success?(s.pop("success","Success!",""),e.new_comment="","undefined"==typeof n&&e.getAllComments(e.tmp_question_id),e.visibleReplyForm=!1,e.comment_tmp_reply=""):angular.forEach(t.error,function(e){angular.forEach(e,function(e){s.pop("error","",e)})})})},e.approveQuestion=function(e){r.Approve(e).then(function(e){e&&(s.pop("success","Success!",""),t.reload())})},e.disapproveQuestion=function(e){r.Disapprove(e).then(function(e){e&&(s.pop("success","Success!",""),t.reload())})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1zL0Zvcm1UaHJlZUN0cmwuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkc3RhdGUiLCIkc3RhdGVQYXJhbXMiLCJ0b2FzdGVyIiwiRm9ybVNlcnZpY2UiLCIkZmlsdGVyIiwiJGh0dHAiLCJ1bmRlcnNjb3JlIiwiUXVlc3Rpb25TZXJ2aWNlIiwiVXNlclNlcnZpY2UiLCJDb21tZW50U2VydmljZSIsImdldFF1ZXN0aW9ucyIsIkluZGV4IiwidGhlbiIsInJlc3BvbnNlIiwidXNlcnNfbmFtZXMiLCJmb3JFYWNoIiwiZGF0YSIsInYiLCJrIiwicHVzaCIsIm5hbWUiLCJTaG93IiwiZm9ybV9pZCIsImdldFF1ZXN0aW9uQnlQb3NpdGlvbiIsInBvc2l0aW9uIiwicXVlc3Rpb24iLCJmaW5kIiwicXVlc3Rpb25zIiwiaXRlbSIsImNoZWNrIiwic2F2ZSIsImlkIiwiVXBkYXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJpc0VtcHR5IiwicGFyc2UiLCJxMV9ob3QiLCJxMV9jb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiSGFuZHNvbnRhYmxlIiwiY29sdW1ucyIsInR5cGUiLCJyZWFkT25seSIsImNlbGxzIiwiciIsImMiLCJjZWxsUHJvcGVydGllcyIsInNvdXJjZSIsInEyX2hvdCIsInEyX2NvbnRhaW5lciIsImZvcm11bGFzIiwicTNfaG90IiwicTNfY29udGFpbmVyIiwicTRfaG90IiwicTRfY29udGFpbmVyIiwicTVfaG90IiwicTVfY29udGFpbmVyIiwicTZfaG90IiwicTZfY29udGFpbmVyIiwicTdfaG90IiwicTdfY29udGFpbmVyIiwicThfaG90IiwicThfY29udGFpbmVyIiwicTlfaG90IiwicTlfY29udGFpbmVyIiwibWVyZ2VDZWxscyIsInJvdyIsImNvbCIsInJvd3NwYW4iLCJjb2xzcGFuIiwiY29tbWVudCIsInExMl9ob3QiLCJxMTJfY29udGFpbmVyIiwicTEzX2hvdCIsInExM19jb250YWluZXIiLCJ1c2VycyIsInN0b3JlQXNzaWduIiwiYXJyIiwiU3RvcmVBc3NpZ24iLCJlbWFpbCIsInRleHQiLCJjb21wYW55X2lkIiwic3VjY2VzcyIsInBvcCIsImVycm9yIiwibWVzc2FnZSIsImFzc2lnblRvQmNwIiwiU3RvcmVRdWVzdGlvbnNUb0JjcCIsInNlbGVjdGVkX3F1ZXN0aW9uIiwiZ2V0UXVlc3Rpb25Vc2VycyIsInRtcF9xdWVzdGlvbl9pZCIsIlVzZXJzIiwidW5hc3NpZ25Vc2VyIiwiRGV0YWNoIiwidmlzaWJsZVJlcGx5Rm9ybSIsImdsb2JhbF9mb3JtIiwiZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzaG93UmVwbHlGb3JtIiwiaW5kZXgiLCJ0ZW1wX2NvbW1lbnRfaWQiLCJ0ZW1wX2NvbW1lbnRfaW5kZXgiLCJ0bXBfZm9ybSIsImFwcGVuZCIsImNvbW1lbnRzIiwiZ2V0QWxsQ29tbWVudHMiLCJHZXRUb1F1ZXN0aW9uIiwicmVzIiwibmV3X2NvbW1lbnQiLCJjb21tZW50X3RtcF9yZXBseSIsInN0b3JlQ29tbWVudCIsInJlcGx5X3RvIiwicXVlc3Rpb25faWQiLCJyZXBseSIsIlN0b3JlIiwiYXBwcm92ZVF1ZXN0aW9uIiwiQXBwcm92ZSIsInJlbG9hZCIsImRpc2FwcHJvdmVRdWVzdGlvbiIsIkRpc2FwcHJvdmUiXSwibWFwcGluZ3MiOiJBQUFBLFlBQ0FBLFNBQVFDLE9BQU8sVUFBVUMsV0FBVyxpQkFBa0IsU0FBVSxTQUFVLGVBQWdCLFVBQVcsY0FBZSxVQUFXLFFBQVMsYUFBYyxrQkFBb0IsY0FBZSxpQkFBa0IsU0FBU0MsRUFBUUMsRUFBUUMsRUFBY0MsRUFBU0MsRUFBYUMsRUFBU0MsRUFBT0MsRUFBWUMsRUFBaUJDLEVBQWFDLEdBSzlULFFBQVNDLEtBSUxGLEVBQVlHLE1BQU0sR0FBRyxHQUFNQyxLQUFLLFNBQVVDLEdBQ3RDLEdBQUlDLEtBQ0psQixTQUFRbUIsUUFBUUYsRUFBU0csS0FBTSxTQUFV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MUcsRUFBZTZHLE1BQU10RyxHQUFNSixLQUFLLFNBQVVtRyxHQUNuQ0EsRUFBSXpCLFNBQ0hwRixFQUFRcUYsSUFBSSxVQUFXLFdBQVksSUFDbkN4RixFQUFPaUgsWUFBYyxHQUlGLG1CQUFUVCxJQUNOeEcsRUFBTzhHLGVBQWU5RyxFQUFPK0YsaUJBSWpDL0YsRUFBT21HLGtCQUFtQixFQUUxQm5HLEVBQU9rSCxrQkFBb0IsSUFFM0JySCxRQUFRbUIsUUFBUWdHLEVBQUl2QixNQUFPLFNBQVVBLEdBQ2pDNUYsUUFBUW1CLFFBQVF5RSxFQUFPLFNBQVVDLEdBQzdCdkYsRUFBUXFGLElBQUksUUFBUyxHQUFJRSxVQWM3QzFGLEVBQU93SCxnQkFBa0IsU0FBU3hGLEdBQzlCeEIsRUFBZ0JpSCxRQUFRekYsR0FBSW5CLEtBQUssU0FBVW1HLEdBQ3BDQSxJQUNDN0csRUFBUXFGLElBQUksVUFBVyxXQUFZLElBQ25DdkYsRUFBT3lILGFBTW5CMUgsRUFBTzJILG1CQUFxQixTQUFTM0YsR0FDakN4QixFQUFnQm9ILFdBQVc1RixHQUFJbkIsS0FBSyxTQUFVbUcsR0FDdkNBLElBQ0M3RyxFQUFRcUYsSUFBSSxVQUFXLFdBQVksSUFDbkN2RixFQUFPeUgiLCJmaWxlIjoiZm9ybXMvRm9ybVRocmVlQ3RybC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmFuZ3VsYXIubW9kdWxlKCdCZmNBcHAnKS5jb250cm9sbGVyKCdGb3JtVGhyZWVDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICd0b2FzdGVyJywgJ0Zvcm1TZXJ2aWNlJywgJyRmaWx0ZXInLCAnJGh0dHAnLCAndW5kZXJzY29yZScsICdRdWVzdGlvblNlcnZpY2UnLCAgJ1VzZXJTZXJ2aWNlJywgJ0NvbW1lbnRTZXJ2aWNlJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgdG9hc3RlciwgRm9ybVNlcnZpY2UsICRmaWx0ZXIsICRodHRwLCB1bmRlcnNjb3JlLCBRdWVzdGlvblNlcnZpY2UsIFVzZXJTZXJ2aWNlLCBDb21tZW50U2VydmljZSkge1xuXG4gICAgLypcbiAgICAgVG9kbyAtIEZyb20gMyBmdW5jdGlvbmFsXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UXVlc3Rpb25zKCkge1xuICAgICAgICAvKlxuICAgICAgICAgVG9kbyAtIEdldCBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBVc2VyU2VydmljZS5JbmRleCgxLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIHVzZXJzX25hbWVzID0gW107XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVzcG9uc2UuZGF0YSwgZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgICAgICAgICB1c2Vyc19uYW1lcy5wdXNoKHYubmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIEZvcm1TZXJ2aWNlLlNob3coJHN0YXRlUGFyYW1zLmZvcm1faWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UXVlc3Rpb25CeVBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVzdGlvbiA9IHVuZGVyc2NvcmUuZmluZChyZXNwb25zZS5kYXRhLnF1ZXN0aW9ucywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnBvc2l0aW9uID09IHBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxdWVzdGlvbiAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb24uY2hlY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBxdWVzdGlvbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUucV9kYXRhID0gW107XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBTYXZlIHF1ZXN0aW9uXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgUXVlc3Rpb25TZXJ2aWNlLlVwZGF0ZSgkc2NvcGUucXVlc3Rpb25zW2lkXS5pZCwgSlNPTi5zdHJpbmdpZnkoJHNjb3BlLnF1ZXN0aW9uc1tpZF0uZGF0YSkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIFF1ZXN0aW9uIDFcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzFdID0gZ2V0UXVlc3Rpb25CeVBvc2l0aW9uKDEpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5xdWVzdGlvbnNbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVyc2NvcmUuaXNFbXB0eSgkc2NvcGUucXVlc3Rpb25zWzFdLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzFdLmRhdGEgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydCYW5rIG5hbWUnLCByZXNwb25zZS5kYXRhLm5hbWVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnQ29tcGxldGVkIGJ5IChuYW1lIGFuZCB0aXRsZSknLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydDb21wbGV0ZWQgb24gKGRheS9tb250aC95ZWFyKScsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzFdLmRhdGEgPSBKU09OLnBhcnNlKCRzY29wZS5xdWVzdGlvbnNbMV0uZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcTFfY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uXzEnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHExX2hvdDtcblxuICAgICAgICAgICAgICAgICAgICBxMV9ob3QgPSBuZXcgSGFuZHNvbnRhYmxlKHExX2NvbnRhaW5lciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogJHNjb3BlLnF1ZXN0aW9uc1sxXS5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsczogZnVuY3Rpb24gKHIsIGMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbFByb3BlcnRpZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPT09IDEgJiYgYyA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkcm9wZG93bicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHVzZXJzX25hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPT09IDIgJiYgYyA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYXRlJyAvLyBmb3JjZSB0ZXh0IHR5cGUgZm9yIGZpcnN0IHJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2VsbFByb3BlcnRpZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBFbmQgUXVlc3Rpb24gMVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgUXVlc3Rpb24gMlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbMl0gPSBnZXRRdWVzdGlvbkJ5UG9zaXRpb24oMik7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uc1syXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5kZXJzY29yZS5pc0VtcHR5KCRzY29wZS5xdWVzdGlvbnNbMl0uZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbMl0uZGF0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJycsICdGb3JlY2FzdCBmb3IgRmluYW5jaWFsWWVhciBfXy9fXy8yMF9fJywgJ0ZpbmFuY2lhbCBQZXJpb2QgdXAgdG8gX18vX18vMjBfXycsICdGaW5hbmNpYWwgWWVhcjIwX18nLCAnRmluYW5jaWFsIFllYXIyMF9fJywgJ0ZpbmFuY2lhbCBZZWFyMjBfXyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnTC9DcycsICcnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ0RvY3VtZW50YXJ5IGNvbGxlY3Rpb25zJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ09wZW4gYWNjb3VudCcsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydHdWFyYW50ZWVzJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ0ltcG9ydCBsb2FucycsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydQcmUtcGF5bWVudHMnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnT3RoZXInLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnVG90YWwgSW1wb3J0cyBTdXBwb3J0ZWQnLCAnPVNVTShCMjpCOCknLCAnPVNVTShDMjpDOCknLCAnPVNVTShEMjpEOCknLCAnPVNVTShFMjpFOCknLCAnPVNVTShGMjpGOCknXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ0wvQ3MnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydEb2N1bWVudGFyeSBjb2xsZWN0aW9ucycsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydPcGVuIGFjY291bnQnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnUHJlL3Bvc3Qgc2hpcG1lbnQgZmluYW5jZScsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydQcmUtcGF5bWVudHMnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnT3RoZXInLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnVG90YWwgRXhwb3J0cyBTdXBwb3J0ZWQnLCAnPVNVTShCMTA6QjE1KScsICc9U1VNKEMxMDpDMTUpJywgJz1TVU0oRDEwOkQxNSknLCAnPVNVTShFMTA6RTE1KScsICc9U1VNKEYxMDpGMTUpJ11cbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzJdLmRhdGEgPSBKU09OLnBhcnNlKCRzY29wZS5xdWVzdGlvbnNbMl0uZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBxMl9jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVlc3Rpb25fMicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcTJfaG90O1xuXG4gICAgICAgICAgICAgICAgICAgIHEyX2hvdCA9IG5ldyBIYW5kc29udGFibGUocTJfY29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAkc2NvcGUucXVlc3Rpb25zWzJdLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtdWxhczogdHJ1ZSxcblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIEVuZCBRdWVzdGlvbiAyXG4gICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBRdWVzdGlvbiAzXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1szXSA9IGdldFF1ZXN0aW9uQnlQb3NpdGlvbigzKTtcblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucXVlc3Rpb25zWzNdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bmRlcnNjb3JlLmlzRW1wdHkoJHNjb3BlLnF1ZXN0aW9uc1szXS5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1szXS5kYXRhID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnJywgJ0ZvcmVjYXN0IGZvcjIwX18nLCAnUGVyaW9kIHVwIHRvX18vX18vMjBfXycsICdZZWFyMjBfXycsICdZZWFyMjBfXycsICdZZWFyMjBfXyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnTnVtYmVyIG9mIGltcG9ydCBMQ3MgaXNzdWVkICgjKScsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydUb3RhbCB2YWx1ZSBvZiBpbXBvcnQgTENzIGlzc3VlZCAoVVNEIG1pbGxpb24pJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJyUgb2YgdGhlIHZhbHVlIG9mIGltcG9ydCBMQ3MgaXNzdWVkIHRoYXQgd2VyZSBjb25maXJtZWQgYnkgb3RoZXIgYmFua3MnLCAnJywgJycsICcnLCAnJywgJyddXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1szXS5kYXRhID0gSlNPTi5wYXJzZSgkc2NvcGUucXVlc3Rpb25zWzNdLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcTNfY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uXzMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHEzX2hvdDtcblxuICAgICAgICAgICAgICAgICAgICBxM19ob3QgPSBuZXcgSGFuZHNvbnRhYmxlKHEzX2NvbnRhaW5lciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogJHNjb3BlLnF1ZXN0aW9uc1szXS5kYXRhXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgRW5kIFF1ZXN0aW9uIDNcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIFF1ZXN0aW9uIDRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzRdID0gZ2V0UXVlc3Rpb25CeVBvc2l0aW9uKDQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5xdWVzdGlvbnNbNF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVyc2NvcmUuaXNFbXB0eSgkc2NvcGUucXVlc3Rpb25zWzRdLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzRdLmRhdGEgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWycnLCAnQXZlcmFnZScsICdNYXhpbXVtJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydWYWxpZGl0eSBwZXJpb2QgKGRheXMpJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ1BheW1lbnQgdGVybXMgKGRheXMpJywgJycsICcnXVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbNF0uZGF0YSA9IEpTT04ucGFyc2UoJHNjb3BlLnF1ZXN0aW9uc1s0XS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHE0X2NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWVzdGlvbl80JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBxNF9ob3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgcTRfaG90ID0gbmV3IEhhbmRzb250YWJsZShxNF9jb250YWluZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ICRzY29wZS5xdWVzdGlvbnNbNF0uZGF0YVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBFbmQgUXVlc3Rpb24gNFxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgUXVlc3Rpb24gNVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbNV0gPSBnZXRRdWVzdGlvbkJ5UG9zaXRpb24oNSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uc1s1XSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5kZXJzY29yZS5pc0VtcHR5KCRzY29wZS5xdWVzdGlvbnNbNV0uZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbNV0uZGF0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJyMnLCAnQ29ycmVzcG9uZGVudCBCYW5rIE5hbWUnLCAnQ3VycmVudCBDcmVkaXQgTGltaXQnLCAnKGluZGljYXRlIGN1cnJlbmN5KScsICdUZW5vciBpbiBtb250aHMnLCAnVXRpbGl6YXRpb24gUmF0ZSAoJSknXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJzEnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnMicsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWyczJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJzQnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnNScsICcnLCAnJywgJycsICcnLCAnJ11cbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzVdLmRhdGEgPSBKU09OLnBhcnNlKCRzY29wZS5xdWVzdGlvbnNbNV0uZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBxNV9jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVlc3Rpb25fNScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcTVfaG90O1xuXG4gICAgICAgICAgICAgICAgICAgIHE1X2hvdCA9IG5ldyBIYW5kc29udGFibGUocTVfY29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAkc2NvcGUucXVlc3Rpb25zWzVdLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Ryb3Bkb3duJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBbJ1VTRCcsICdFVVInLCAnUlVCJywgJ1VIQSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzOiBmdW5jdGlvbiAociwgYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociA9PT0gMCAmJiBjID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBFbmQgUXVlc3Rpb24gNVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgUXVlc3Rpb24gNlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbNl0gPSBnZXRRdWVzdGlvbkJ5UG9zaXRpb24oNik7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uc1s2XSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5kZXJzY29yZS5pc0VtcHR5KCRzY29wZS5xdWVzdGlvbnNbNl0uZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbNl0uZGF0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJyMnLCAnQ29ycmVzcG9uZGVudCBCYW5rIE5hbWUnLCAnQ3VycmVudCBDcmVkaXQgTGltaXQnLCAnKGluZGljYXRlIGN1cnJlbmN5KScsICdUZW5vciBpbiBtb250aHMnLCAnVXRpbGl6YXRpb24gUmF0ZSAoJSknXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJzEnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnMicsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWyczJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJzQnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnNScsICcnLCAnJywgJycsICcnLCAnJ11cbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzZdLmRhdGEgPSBKU09OLnBhcnNlKCRzY29wZS5xdWVzdGlvbnNbNl0uZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBxNl9jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVlc3Rpb25fNicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcTZfaG90O1xuXG4gICAgICAgICAgICAgICAgICAgIHE2X2hvdCA9IG5ldyBIYW5kc29udGFibGUocTZfY29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAkc2NvcGUucXVlc3Rpb25zWzZdLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Ryb3Bkb3duJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBbJ1VTRCcsICdFVVInLCAnUlVCJywgJ1VIQSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzOiBmdW5jdGlvbiAociwgYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociA9PT0gMCAmJiBjID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBFbmQgUXVlc3Rpb24gNlxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgUXVlc3Rpb24gN1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbN10gPSBnZXRRdWVzdGlvbkJ5UG9zaXRpb24oNyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uc1s3XSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5kZXJzY29yZS5pc0VtcHR5KCRzY29wZS5xdWVzdGlvbnNbN10uZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbN10uZGF0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJycsICdZZWFyIDIwX18nLCAnWWVhciAyMF9fJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydJbnRlcmVzdCBpbmNvbWUgZnJvbSBUcmFkZSBGaW5hbmNlJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ0ZlZS9jb21taXNzaW9uIGluY29tZSBmcm9tIFRyYWRlIEZpbmFuY2UnLCAnJywgJyddXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1s3XS5kYXRhID0gSlNPTi5wYXJzZSgkc2NvcGUucXVlc3Rpb25zWzddLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcTdfY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uXzcnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHE3X2hvdDtcblxuICAgICAgICAgICAgICAgICAgICBxN19ob3QgPSBuZXcgSGFuZHNvbnRhYmxlKHE3X2NvbnRhaW5lciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogJHNjb3BlLnF1ZXN0aW9uc1s3XS5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBFbmQgUXVlc3Rpb24gN1xuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgUXVlc3Rpb24gOFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbOF0gPSBnZXRRdWVzdGlvbkJ5UG9zaXRpb24oOCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uc1s4XSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5kZXJzY29yZS5pc0VtcHR5KCRzY29wZS5xdWVzdGlvbnNbOF0uZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbOF0uZGF0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJycsICdZZWFyIDIwX18nXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ01hcmtldCBzaGFyZSAoJSknLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydSYW5raW5nICgjKScsICcnXVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbOF0uZGF0YSA9IEpTT04ucGFyc2UoJHNjb3BlLnF1ZXN0aW9uc1s4XS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHE4X2NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWVzdGlvbl84JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBxOF9ob3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgcThfaG90ID0gbmV3IEhhbmRzb250YWJsZShxOF9jb250YWluZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ICRzY29wZS5xdWVzdGlvbnNbOF0uZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgRW5kIFF1ZXN0aW9uIDhcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIFF1ZXN0aW9uIDlcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzldID0gZ2V0UXVlc3Rpb25CeVBvc2l0aW9uKDkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5xdWVzdGlvbnNbOV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVyc2NvcmUuaXNFbXB0eSgkc2NvcGUucXVlc3Rpb25zWzldLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzldLmRhdGEgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydJTVBPUlRTIFNVUFBPUlRFRCcsICcnLCAnRVhQT1JUUyBTVVBQT1JURUQnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydDb3VudHJ5JywgJ01haW4gR29vZHMgSW1wb3J0ZWQnLCAnQ291bnRyeScsICdNYWluIEdvb2RzIEV4cG9ydGVkJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWycnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJycsICcnLCAnJywgJyddXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1s5XS5kYXRhID0gSlNPTi5wYXJzZSgkc2NvcGUucXVlc3Rpb25zWzldLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcTlfY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uXzknKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHE5X2hvdDtcblxuICAgICAgICAgICAgICAgICAgICBxOV9ob3QgPSBuZXcgSGFuZHNvbnRhYmxlKHE5X2NvbnRhaW5lciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogJHNjb3BlLnF1ZXN0aW9uc1s5XS5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VDZWxsczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyb3c6IDAsIGNvbDogMCwgcm93c3BhbjogMSwgY29sc3BhbjogMn0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3JvdzogMCwgY29sOiAyLCByb3dzcGFuOiAxLCBjb2xzcGFuOiAyfVxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzOiBmdW5jdGlvbiAociwgYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjZWxsUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHIgPT09IDIgJiYgYyA9PT0gMCkgfHwgKHIgPT09IDMgJiYgYyA9PT0gMCkgfHwgKHIgPT09IDIgJiYgYyA9PT0gMikgfHwgKHIgPT09IDMgJiYgYyA9PT0gMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZHJvcGRvd24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBbJ1VrcmFpbmUnLCAnR2VybWFueSddXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBFbmQgUXVlc3Rpb24gOVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgUXVlc3Rpb24gMTBcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzEwXSA9IGdldFF1ZXN0aW9uQnlQb3NpdGlvbigxMCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uc1sxMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVyc2NvcmUuaXNFbXB0eSgkc2NvcGUucXVlc3Rpb25zWzEwXS5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1sxMF0uZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVjazogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzEwXS5kYXRhID0gSlNPTi5wYXJzZSgkc2NvcGUucXVlc3Rpb25zWzEwXS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIEVuZCBRdWVzdGlvbiAxMFxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgUXVlc3Rpb24gMTFcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzExXSA9IGdldFF1ZXN0aW9uQnlQb3NpdGlvbigxMSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uc1sxMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVyc2NvcmUuaXNFbXB0eSgkc2NvcGUucXVlc3Rpb25zWzExXS5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1sxMV0uZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVjazogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzExXS5kYXRhID0gSlNPTi5wYXJzZSgkc2NvcGUucXVlc3Rpb25zWzExXS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICBFbmQgUXVlc3Rpb24gMTFcbiAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIFF1ZXN0aW9uIDEyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1sxMl0gPSBnZXRRdWVzdGlvbkJ5UG9zaXRpb24oMTIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5xdWVzdGlvbnNbMTJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bmRlcnNjb3JlLmlzRW1wdHkoJHNjb3BlLnF1ZXN0aW9uc1sxMl0uZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5xdWVzdGlvbnNbMTJdLmRhdGEgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydOYW1lJywgJ1llYXJzIG9mIGV4cCBpbiB0cmFkZSBmaW5hbmNlJywgJ0NlcnRpZmljYXRlcyBvciB0cmFpbmluZycsICcnLCAnTmFtZScsICdZZWFycyBvZiBleHAgaW4gdHJhZGUgZmluYW5jZScsICdDZXJ0aWZpY2F0ZXMgb3IgdHJhaW5pbmcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJycsICcnLCAnJywgJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1sxMl0uZGF0YSA9IEpTT04ucGFyc2UoJHNjb3BlLnF1ZXN0aW9uc1sxMl0uZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBxMTJfY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uXzEyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBxMTJfaG90O1xuXG4gICAgICAgICAgICAgICAgICAgIHExMl9ob3QgPSBuZXcgSGFuZHNvbnRhYmxlKHExMl9jb250YWluZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ICRzY29wZS5xdWVzdGlvbnNbMTJdLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZUNlbGxzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3JvdzogMCwgY29sOiAzLCByb3dzcGFuOiAzLCBjb2xzcGFuOiAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgIEVuZCBRdWVzdGlvbiAxMlxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgUXVlc3Rpb24gMTNcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzEzXSA9IGdldFF1ZXN0aW9uQnlQb3NpdGlvbigxMyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnF1ZXN0aW9uc1sxM10pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVyc2NvcmUuaXNFbXB0eSgkc2NvcGUucXVlc3Rpb25zWzEzXS5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnF1ZXN0aW9uc1sxM10uZGF0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ05hbWUnLCAnWWVhcnMgb2YgZXhwIGluIHRyYWRlIGZpbmFuY2UnLCAnQ2VydGlmaWNhdGVzIG9yIHRyYWluaW5nJywgJycsICdOYW1lJywgJ1llYXJzIG9mIGV4cCBpbiB0cmFkZSBmaW5hbmNlJywgJ0NlcnRpZmljYXRlcyBvciB0cmFpbmluZyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWycnLCAnJywgJycsICcnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucXVlc3Rpb25zWzEzXS5kYXRhID0gSlNPTi5wYXJzZSgkc2NvcGUucXVlc3Rpb25zWzEzXS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHExM19jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVlc3Rpb25fMTMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHExM19ob3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgcTEzX2hvdCA9IG5ldyBIYW5kc29udGFibGUocTEzX2NvbnRhaW5lciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogJHNjb3BlLnF1ZXN0aW9uc1sxM10uZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlQ2VsbHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cm93OiAwLCBjb2w6IDMsIHJvd3NwYW46IDMsIGNvbHNwYW46IDF9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgRW5kIFF1ZXN0aW9uIDEzXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFF1ZXN0aW9ucygpO1xuXG5cbiAgICAvKlxuICAgICBBc3NpZ24gZnVuY3Rpb25hbFxuICAgICAqL1xuICAgICRzY29wZS51c2VycyA9IFtdO1xuICAgIC8qXG4gICAgIFRvZG8gLSBBc3NpZ24gcXVlc3Rpb25zIHRvIHVzZXIgKCsgY3JlYXRlIG5ldyB1c2VyKSByb2xlXG4gICAgICovXG4gICAgJHNjb3BlLnN0b3JlQXNzaWduID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUucXVlc3Rpb25zLCBmdW5jdGlvbiAodixrKSB7XG4gICAgICAgICAgICBpZih2KXtcbiAgICAgICAgICAgICAgICBpZih2LmNoZWNrKXtcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2godi5pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBVc2VyU2VydmljZS5TdG9yZUFzc2lnbih7XG4gICAgICAgICAgICAnZGF0YScgOiBhcnIsXG4gICAgICAgICAgICAndXNlcnMnIDogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUudXNlcnMsIGZ1bmN0aW9uICh2LGspIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdlbWFpbCcgOiB2LnRleHRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0oKSlcbiAgICAgICAgfSwgJHN0YXRlUGFyYW1zLmNvbXBhbnlfaWQsICRzdGF0ZVBhcmFtcy5mb3JtX2lkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3VjY2Vzcyl7XG4gICAgICAgICAgICAgICAgdG9hc3Rlci5wb3AoJ3N1Y2Nlc3MnLCBcIlN1Y2Nlc3MhXCIsIFwiXCIpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3BvbnNlLmVycm9yLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGVycm9yLCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3Rlci5wb3AoJ2Vycm9yJywgXCJcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLypcbiAgICAgVG9kbyAtIEFzc2lnbiBxdWVzdGlvbnMgdG8gQkNwIHJvbGVcbiAgICAgKi9cbiAgICAkc2NvcGUuYXNzaWduVG9CY3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5xdWVzdGlvbnMsIGZ1bmN0aW9uICh2LGspIHtcbiAgICAgICAgICAgIGlmKHYuY2hlY2spe1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHYuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgVXNlclNlcnZpY2UuU3RvcmVRdWVzdGlvbnNUb0JjcCgkc3RhdGVQYXJhbXMuY29tcGFueV9pZCwgJHN0YXRlUGFyYW1zLmZvcm1faWQsIGFycikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlLnN1Y2Nlc3Mpe1xuICAgICAgICAgICAgICAgIHRvYXN0ZXIucG9wKCdzdWNjZXNzJywgXCJTdWNjZXNzIVwiLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qXG4gICAgIEVORCBBc3NpZ24gZnVuY3Rpb25hbFxuICAgICAqL1xuXG5cbiAgICAvKlxuICAgICBVbmFzc2lnbiBmdW5jdGlvbmFsXG4gICAgICovXG5cbiAgICAvKlxuICAgICBUb2RvIC0gR2V0IHVzZXJzIHRvIHF1ZXN0aW9uc1xuICAgICAqL1xuICAgICRzY29wZS5zZWxlY3RlZF9xdWVzdGlvbiA9IHt9O1xuICAgICRzY29wZS5nZXRRdWVzdGlvblVzZXJzID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICRzY29wZS50bXBfcXVlc3Rpb25faWQgPSBpZDtcbiAgICAgICAgUXVlc3Rpb25TZXJ2aWNlLlVzZXJzKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkX3F1ZXN0aW9uLnVzZXJzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qXG4gICAgIFRvZG8gLSBVbmFzc2lnbiB1c2VyIGZyb20gcXVlc3Rpb25cbiAgICAgKi9cbiAgICAkc2NvcGUudW5hc3NpZ25Vc2VyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIFF1ZXN0aW9uU2VydmljZS5EZXRhY2goJHNjb3BlLnRtcF9xdWVzdGlvbl9pZCwgaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZihyZXNwb25zZS5zdWNjZXNzKXtcbiAgICAgICAgICAgICAgICB0b2FzdGVyLnBvcCgnc3VjY2VzcycsIFwiU3VjY2VzcyFcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldFF1ZXN0aW9uVXNlcnMoJHNjb3BlLnRtcF9xdWVzdGlvbl9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKlxuICAgICBFTkQgVW5hc3NpZ24gZnVuY3Rpb25hbFxuICAgICAqL1xuXG5cblxuICAgIC8qXG4gICAgIFRvZG8gLSBDb21tZW50cyBmdW5jdGlvbmFsXG4gICAgICovXG5cbiAgICAvLyBTaG93IHJlcGx5IGZvcm1cbiAgICAkc2NvcGUudmlzaWJsZVJlcGx5Rm9ybSA9IGZhbHNlO1xuICAgIHZhciBnbG9iYWxfZm9ybSA9IGFuZ3VsYXIuZWxlbWVudCggZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJyNnbG9iYWxfYWRkX2NvbW1lbnRzX2Zvcm0nKSApO1xuICAgICRzY29wZS5zaG93UmVwbHlGb3JtID0gZnVuY3Rpb24oaWQsIGluZGV4KXtcbiAgICAgICAgY29uc29sZS5sb2coaWQsIGluZGV4KTtcbiAgICAgICAgJHNjb3BlLnRlbXBfY29tbWVudF9pZCA9IGlkO1xuICAgICAgICAkc2NvcGUudGVtcF9jb21tZW50X2luZGV4ID0gaW5kZXg7XG4gICAgICAgIHZhciB0bXBfZm9ybSA9IGFuZ3VsYXIuZWxlbWVudCggZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJyN0bXBfYWRkX2NvbW1lbnRzX2Zvcm0nK2lkKSApO1xuICAgICAgICB0bXBfZm9ybS5hcHBlbmQoZ2xvYmFsX2Zvcm0pO1xuICAgICAgICAkc2NvcGUudmlzaWJsZVJlcGx5Rm9ybSA9ICEkc2NvcGUudmlzaWJsZVJlcGx5Rm9ybTtcbiAgICB9O1xuXG4gICAgLy8gR2V0IGFsbCBjb21tZW50IHRvIHF1ZXN0aW9uc1xuICAgICRzY29wZS5jb21tZW50cyA9IFtdO1xuICAgICRzY29wZS5nZXRBbGxDb21tZW50cyA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAkc2NvcGUudG1wX3F1ZXN0aW9uX2lkID0gaWQ7XG4gICAgICAgIENvbW1lbnRTZXJ2aWNlLkdldFRvUXVlc3Rpb24oaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgJHNjb3BlLmNvbW1lbnRzID0gcmVzO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gU3RvcmUgbmV3IGNvbW1lbnRcbiAgICAkc2NvcGUubmV3X2NvbW1lbnQgPSAnJztcbiAgICAkc2NvcGUuY29tbWVudF90bXBfcmVwbHkgPSAnJztcbiAgICAkc2NvcGUuc3RvcmVDb21tZW50ID0gZnVuY3Rpb24gKHJlcGx5X3RvLCBpbmRleCkge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICdjb21tZW50Jzokc2NvcGUubmV3X2NvbW1lbnQsXG4gICAgICAgICAgICAncXVlc3Rpb25faWQnOiRzY29wZS50bXBfcXVlc3Rpb25faWQsXG4gICAgICAgIH07XG4gICAgICAgIGlmKHR5cGVvZiByZXBseV90byAhPSAndW5kZWZpbmVkJyl7XG4gICAgICAgICAgICBkYXRhLmNvbW1lbnQgPSAkc2NvcGUuY29tbWVudF90bXBfcmVwbHk7XG4gICAgICAgICAgICBkYXRhLnJlcGx5ID0gMTtcbiAgICAgICAgICAgIGRhdGEucmVwbHlfdG8gPSByZXBseV90bztcbiAgICAgICAgfTtcbiAgICAgICAgQ29tbWVudFNlcnZpY2UuU3RvcmUoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZihyZXMuc3VjY2Vzcyl7XG4gICAgICAgICAgICAgICAgdG9hc3Rlci5wb3AoJ3N1Y2Nlc3MnLCBcIlN1Y2Nlc3MhXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICRzY29wZS5uZXdfY29tbWVudCA9ICcnO1xuICAgICAgICAgICAgICAgIC8vIGlmKHR5cGVvZiBpbmRleCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIC8vICAgICAkc2NvcGUuY29tbWVudHNbaW5kZXhdLnRtcF9yZXBseSA9ICcnO1xuICAgICAgICAgICAgICAgIC8vIH07XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGluZGV4ID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZXRBbGxDb21tZW50cygkc2NvcGUudG1wX3F1ZXN0aW9uX2lkKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gcmVsb2FkIGFsbCBjb21tZW50c1xuICAgICAgICAgICAgICAgICRzY29wZS52aXNpYmxlUmVwbHlGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLmdldEFsbENvbW1lbnRzKCRzY29wZS50bXBfcXVlc3Rpb25faWQpO1xuICAgICAgICAgICAgICAgICRzY29wZS5jb21tZW50X3RtcF9yZXBseSA9ICcnO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlcy5lcnJvciwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChlcnJvciwgZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ZXIucG9wKCdlcnJvcicsIFwiXCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKlxuICAgICBFTkQgQ29tbWVudHMgZnVuY3Rpb25hbFxuICAgICAqL1xuXG5cbiAgICAvKlxuICAgICBUb2RvIC0gQXBwcm92ZSAvIERpc2FwcHJvdmUgZnVuY3Rpb25hbFxuICAgICAqL1xuICAgICRzY29wZS5hcHByb3ZlUXVlc3Rpb24gPSBmdW5jdGlvbihpZCl7XG4gICAgICAgIFF1ZXN0aW9uU2VydmljZS5BcHByb3ZlKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGlmKHJlcyl7XG4gICAgICAgICAgICAgICAgdG9hc3Rlci5wb3AoJ3N1Y2Nlc3MnLCBcIlN1Y2Nlc3MhXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICRzdGF0ZS5yZWxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgJHNjb3BlLmRpc2FwcHJvdmVRdWVzdGlvbiA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgUXVlc3Rpb25TZXJ2aWNlLkRpc2FwcHJvdmUoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgaWYocmVzKXtcbiAgICAgICAgICAgICAgICB0b2FzdGVyLnBvcCgnc3VjY2VzcycsIFwiU3VjY2VzcyFcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgJHN0YXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qXG4gICAgIEVORCBBcHByb3ZlIC8gRGlzYXBwcm92ZSBmdW5jdGlvbmFsXG4gICAgICovXG5cbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
